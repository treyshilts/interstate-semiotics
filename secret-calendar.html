<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>secret calendar</title>
  <style>
    body {
      font-family: "Times New Roman", serif;
      background: #f9f9f9;
      margin: 0;
      padding: 0;
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      height: 100vh;
    }

    .circle-wrapper {
      position: relative;
      width: 1200px;
      height: 1200px;
    }

    .month-box {
      position: absolute;
      width: 200px;
      height: 200px;
      border: 1px solid black;
      padding: 8px;
      box-sizing: border-box;
      display: flex;
      flex-direction: column;
      font-size: 14px;
      background: white;
    }

    .month-name {
      margin: 0 0 4px 0;
    }

    .calendar-grid {
      flex-grow: 1;
      display: grid;
      grid-template-columns: repeat(7, 1fr);
      grid-template-rows: repeat(6, 1fr);
      gap: 1px;
      font-size: 10px;
    }

    .calendar-cell {
      border: 1px solid #aaa;
      text-align: center;
      line-height: 1.4em;
    }

    .calendar-header {
      font-weight: bold;
    }
  </style>
</head>
<body style="font-family:'Times New Roman', serif;">
  <h1>secret calendar</h1>
  <p>my secret calendar. you aren't supposed to be here (but that's okay)</p>

<div id="calendar-stats" style="width: 1200px; text-align: left; font-size: 18px; margin-bottom: 20px; line-height: 1.8;"></div>

<div style="transform: translate(150px, 40px) scale(0.7); transform-origin: top left;">
  <div style="width: 1200px; text-align: center; font-weight: bold; font-size: 48x; margin-bottom: 10px;" id="calendar-year">
    <!-- year will go here -->
  </div>
  <div class="circle-wrapper" id="calendar-circle">
    <!-- calendar content -->
  </div>
</div>

<script>
  const monthNames = [
    "January", "February", "March", "April",
    "May", "June", "July", "August",
    "September", "October", "November", "December"
  ];

  const positions = [
    { left: 500, top: 60 },         // December
    { left: 768.5, top: 132.2 },    // January
    { left: 1030.6, top: 317.5 },   // February
    { left: 1140, top: 600 },       // March
    { left: 1030.6, top: 882.5 },   // April
    { left: 768.5, top: 1067.8 },   // May
    { left: 500, top: 1140 },       // June
    { left: 231.5, top: 1067.8 },   // July
    { left: -30.6, top: 882.5 },    // August
    { left: -140, top: 600 },       // September
    { left: -30.6, top: 317.5 },    // October
    { left: 231.5, top: 132.2 },    // November
  ];

  const year = new Date().getFullYear();
  const circle = document.getElementById("calendar-circle");
  document.getElementById("calendar-year").textContent = year;
function daysBetweenPST(year, month, day) {
  const MILLISECONDS_PER_DAY = 1000 * 60 * 60 * 24;

  // Create UTC-based date and shift it to PST by subtracting 7 hours
  const pstOffsetMs = 7 * 60 * 60 * 1000;

  const now = new Date();
  const todayUTC = new Date(Date.UTC(now.getFullYear(), now.getMonth(), now.getDate()));
  const targetUTC = new Date(Date.UTC(year, month - 1, day));

  const todayPST = new Date(todayUTC.getTime() - pstOffsetMs);
  const targetPST = new Date(targetUTC.getTime() - pstOffsetMs);

  const diff = Math.floor((targetPST - todayPST) / MILLISECONDS_PER_DAY);
  return diff;
}

// Usage:
const sinceQuit = daysBetweenPST(2025, 7, 28) * -1;
const untilTour = daysBetweenPST(2025, 9, 11);
const untilMoveOut = daysBetweenPST(2025, 9, 1);
const untilMattLaura = daysBetweenPST(2025, 11, 1);


document.getElementById("calendar-stats").innerHTML = `
  <div><strong>since last time consuming nicotine:</strong> ${sinceQuit} days</div>
  <div><strong>until I move out:</strong> ${untilMoveOut} days</div>
  <div><strong>until east coast tour:</strong> ${untilTour} days</div>
  <div><strong>days until I move out of Matt and Laura's:</strong> ${untilMattLaura} days</div>
`;

  function getMonthDays(monthIndex, year) {
    return new Date(year, monthIndex + 1, 0).getDate();
  }

  function getStartDay(monthIndex, year) {
    return new Date(year, monthIndex, 1).getDay(); // 0 = Sunday
  }

  function createMonthBox(monthIndex, position) {
    const monthBox = document.createElement("div");
    monthBox.className = "month-box";

    monthBox.style.left = `${position.left}px`;
    monthBox.style.top = `${position.top}px`;

    const monthName = document.createElement("p");
    monthName.className = "month-name";
    monthName.textContent = monthNames[monthIndex];
    monthBox.appendChild(monthName);

    const grid = document.createElement("div");
    grid.className = "calendar-grid";

    ["SUN", "MON", "TUE", "WED", "THU", "FRI", "SAT"].forEach(d => {
      const header = document.createElement("div");
      header.className = "calendar-cell calendar-header";
      header.textContent = d;
      grid.appendChild(header);
    });

    const daysInMonth = getMonthDays(monthIndex, year);
    const startDay = getStartDay(monthIndex, year);

    for (let i = 0; i < startDay; i++) {
      const cell = document.createElement("div");
      cell.className = "calendar-cell";
      grid.appendChild(cell);
    }

    const today = new Date();

    for (let day = 1; day <= daysInMonth; day++) {
      const cell = document.createElement("div");
      cell.className = "calendar-cell";
      cell.textContent = day;

      const cellDate = new Date(year, monthIndex, day);

      if (
        cellDate.getFullYear() === today.getFullYear() &&
        cellDate.getMonth() === today.getMonth() &&
        cellDate.getDate() === today.getDate()
      ) {
        cell.style.backgroundColor = "#c4e3ff";
        cell.style.color = "black";
        cell.style.fontWeight = "bold";
      } else if (cellDate < today) {
        cell.style.backgroundColor = "#f2f0f0";
        cell.style.color = "black";
      }

      grid.appendChild(cell);
    }

    const filled = startDay + daysInMonth;
    const totalCells = 42 - 7;
    for (let i = filled; i < totalCells; i++) {
      const cell = document.createElement("div");
      cell.className = "calendar-cell";
      grid.appendChild(cell);
    }

    monthBox.appendChild(grid);
    return monthBox;
  }

  // ✅ You had this inside the function before — now it's outside
  for (let i = 0; i < 12; i++) {
    const position = positions[(i + 1) % 12]; // rotate clockwise by 1
    const box = createMonthBox(i, position);
    circle.appendChild(box);
  }
</script>

</body>
</html>
